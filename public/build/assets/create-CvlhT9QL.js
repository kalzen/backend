import{m as y,r as D,j as e,L as _,$ as k}from"./app-DvYsBOnb.js";import{A as T,D as F,a as M,b as L,k as S,l as B,m as H}from"./app-layout-CuRrIkuq.js";import{H as I}from"./heading-small-BU1p3WaW.js";import{B as u}from"./app-logo-icon-DPPA0oKt.js";import{I as g}from"./input-DO2SqQaT.js";import{L as n}from"./label-ChzbYvSc.js";import{I as o}from"./input-error-Co6Y_bkI.js";import{C as E}from"./checkbox-960ZCwBC.js";import{I as z}from"./image-uploader-BUf2aGQO.js";import{B as A}from"./badge-0nD7DV0O.js";import{C as $}from"./chevron-down-DKBtrZKh.js";import{T as P}from"./tag-wKSGf5N3.js";import{z as R}from"./transition-BMJndn37.js";import"./index-C2LM2ONO.js";import"./index-CQTslqUg.js";import"./index-CDU8Fn28.js";import"./card-Buo9e3DY.js";import"./PencilIcon-DTIk7Vo1.js";const U=[{title:"Bài viết",href:route("posts.index")},{title:"Tạo bài viết mới",href:route("posts.create")}];function oe({categories:d=[]}){const{data:i,setData:a,post:j,processing:x,errors:t,recentlySuccessful:v}=y({title:"",content:"",description:"",slug:"",image:null,is_published:!1,published_at:"",categories:[]}),[c,N]=D.useState([]),w=(s,l)=>{var b,f;let m,h;if(l){m=[...i.categories,s];const p=((b=d.find(r=>r.id===s))==null?void 0:b.name)||"";h=[...c,p]}else{m=i.categories.filter(r=>r!==s);const p=((f=d.find(r=>r.id===s))==null?void 0:f.name)||"";h=c.filter(r=>r!==p)}a("categories",m),N(h)},C=s=>{s.preventDefault(),j(route("posts.store"),{forceFormData:!0})};return e.jsxs(T,{breadcrumbs:U,children:[e.jsx(_,{title:"Tạo bài viết mới"}),e.jsxs("div",{className:"space-6 px-4 py-6",children:[e.jsx("div",{className:"pb-4",children:e.jsx(I,{title:"Tạo bài viết mới",description:"Thêm một bài viết mới vào blog của bạn"})}),e.jsxs("form",{onSubmit:C,className:"space-y-6 pt-4 border-t",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"title",children:"Tiêu đề"}),e.jsx(g,{id:"title",value:i.title,onChange:s=>a("title",s.target.value),placeholder:"Tiêu đề bài viết"}),e.jsx(o,{message:t.title})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"slug",children:"Đường dẫn"}),e.jsx(g,{id:"slug",value:i.slug,onChange:s=>a("slug",s.target.value),placeholder:"duong-dan-bai-viet"}),e.jsx(o,{message:t.slug})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"description",children:"Mô tả"}),e.jsx("textarea",{id:"description",className:"min-h-[120px] rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:i.description,onChange:s=>a("description",s.target.value),placeholder:"Mô tả ngắn gọn về bài viết của bạn",rows:3}),e.jsx(o,{message:t.description})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"content",children:"Nội dung"}),e.jsx("textarea",{id:"content",className:"min-h-[200px] rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:i.content,onChange:s=>a("content",s.target.value),placeholder:"Viết nội dung bài viết của bạn tại đây",rows:8}),e.jsx(o,{message:t.content})]}),e.jsx("div",{className:"grid gap-2",children:e.jsx(z,{id:"image",onChange:s=>a("image",s),title:"Hình ảnh đại diện",description:"Tải lên hình ảnh đại diện cho bài viết",error:t.image,helpText:"Hình ảnh sẽ được tự động tối ưu kích thước và chất lượng",placeholder:"/assets/image-placeholder.png",className:"w-24 h-24 rounded-md",previewClassName:"w-full h-48"})}),d.length>0&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"categories",children:"Danh mục"}),e.jsxs(F,{children:[e.jsx(M,{asChild:!0,children:e.jsxs(u,{variant:"outline",className:"w-full justify-between",children:[e.jsx("span",{className:"flex flex-wrap gap-1",children:c.length>0?c.map((s,l)=>e.jsx(A,{variant:"secondary",className:"mr-1",children:s},l)):e.jsx("span",{className:"text-muted-foreground",children:"Chọn danh mục cho bài viết"})}),e.jsx($,{className:"h-4 w-4 opacity-50"})]})}),e.jsxs(L,{align:"start",className:"w-56 max-h-80 overflow-auto",children:[e.jsx(S,{children:"Danh mục"}),e.jsx(B,{}),d.map(s=>e.jsx(H,{checked:i.categories.includes(s.id),onCheckedChange:l=>w(s.id,l),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{className:"w-4 h-4 mr-2 text-muted-foreground"}),s.name]})},s.id))]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Bạn có thể chọn nhiều danh mục cho bài viết"}),t.categories&&e.jsx("p",{className:"text-sm text-red-600",children:t.categories})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{id:"is_published",checked:i.is_published,onCheckedChange:s=>a("is_published",s)}),e.jsx(n,{htmlFor:"is_published",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Xuất bản ngay"}),e.jsx(o,{message:t.is_published})]}),!i.is_published&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(n,{htmlFor:"published_at",children:"Ngày xuất bản"}),e.jsx(g,{id:"published_at",type:"datetime-local",value:i.published_at,onChange:s=>a("published_at",s.target.value)}),e.jsx(o,{message:t.published_at})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u,{type:"submit",disabled:x,children:x?"Đang lưu...":"Lưu bài viết"}),e.jsx(k,{href:route("posts.index"),children:e.jsx(u,{variant:"outline",type:"button",children:"Hủy"})}),e.jsx(R,{show:v,enter:"transition ease-in-out",enterFrom:"opacity-0",leave:"transition ease-in-out",leaveTo:"opacity-0",children:e.jsx("p",{className:"text-sm text-neutral-600",children:"Đã lưu"})})]})]})]})]})}export{oe as default};
